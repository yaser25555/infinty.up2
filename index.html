<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>INFINITY</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri&family=Scheherazade+New:wght@400;700&family=Noto+Naskh+Arabic:wght@4400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            /* ØªØ¯Ø±Ø¬ Ù„ÙˆÙ†ÙŠ Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© */
            background-color: #1a2a4b; /* Ù‡Ø°Ø§ ÙŠØ¹Ù…Ù„ ÙƒØ®Ù„ÙÙŠØ© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø£ÙˆÙ„ÙŠØ© */
            background: linear-gradient(to bottom right, #1a2a4b, #4a6c8e); /* Ù‡Ø°Ø§ ØªØ¯Ø±Ø¬ Ù„ÙˆÙ†ÙŠ Ø§Ø­ØªÙŠØ§Ø·ÙŠ */

            /* ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø®ØµØ§Ø¦Øµ ØªØ£ØªÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¯Ø±Ø¬ Ø§Ù„Ù„ÙˆÙ†ÙŠ Ù„ÙƒÙŠ ØªØ¸Ù‡Ø± Ø§Ù„ØµÙˆØ±Ø© ÙÙˆÙ‚Ù‡ */
            background-image: url('beautiful_background.jpg'); /* ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† 'beautiful_background.jpg' Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù†ÙØ³ Ù…Ø¬Ù„Ø¯ Ù…Ù„Ù HTML */
            background-size: cover; /* ØªØºØ·ÙŠØ© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø®Ù„ÙÙŠØ© Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø± */
            background-position: center center; /* ØªÙˆØ³ÙŠØ· Ø§Ù„ØµÙˆØ±Ø© */
            background-attachment: fixed; /* ØªØ«Ø¨ÙŠØª Ø§Ù„ØµÙˆØ±Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
            background-repeat: no-repeat; /* Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ø§Ù„ØµÙˆØ±Ø© */

            font-family: 'Noto Naskh Arabic', 'Segoe UI', Tahoma, Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            color: #f0f0f0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }

        h1 {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 24px;
            margin-top: 30px;
            margin-bottom: 30px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            letter-spacing: 2px; /* Ù…Ø³Ø§ÙØ§Øª Ø¨ÙŠÙ† Ø§Ù„Ø­Ø±ÙˆÙ */
        }

        .infinity-highlight {
            color: #FFD700; /* Ù„ÙˆÙ† Ø°Ù‡Ø¨ÙŠ */
            background-color: rgba(255, 215, 0, 0.2); /* Ø®Ù„ÙÙŠØ© Ø°Ù‡Ø¨ÙŠØ© Ø´ÙØ§ÙØ© */
            border-radius: 8px;
            padding: 5px 12px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        .infinity-highlight:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .in-highlight {
            color: #ff6347; /* Ù„ÙˆÙ† Ø£Ø­Ù…Ø± Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ */
            font-family: 'Amiri', serif;
            font-weight: 700;
            font-size: 1.1em;
            background-color: rgba(255, 99, 71, 0.2);
            border-radius: 5px;
            padding: 2px 8px;
            transition: all 0.3s ease;
        }
        .in-highlight:hover {
            background-color: rgba(255, 99, 71, 0.4);
            transform: rotate(-2deg);
        }

        .ahlan-chat-highlight {
            color: #00ffff; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ø³Ù…Ø§ÙˆÙŠ */
            font-family: 'Scheherazade New', serif;
            font-weight: 700;
            font-size: 1.2em;
            background-color: rgba(0, 255, 255, 0.15);
            border-radius: 10px;
            padding: 3px 10px;
            transition: all 0.3s ease-in-out;
            animation: yellow-heartbeat 1.2s infinite;
            box-shadow: 0 0 30px 10px #FFD700, 0 0 60px 20px #fff70033;
        }
        .ahlan-chat-highlight:hover {
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
            transform: scale(1.05);
        }
        @keyframes yellow-heartbeat {
            0%, 100% { transform: scale(1); box-shadow: 0 0 30px 10px #FFD700, 0 0 60px 20px #fff70033; }
            10%, 30% { transform: scale(1.08); box-shadow: 0 0 40px 20px #FFD700, 0 0 80px 30px #fff70066; }
            20%, 40% { transform: scale(0.96); box-shadow: 0 0 20px 5px #FFD700, 0 0 40px 10px #fff70022; }
            50% { transform: scale(1.12); box-shadow: 0 0 50px 25px #FFD700, 0 0 100px 40px #fff70099; }
            60% { transform: scale(0.92); box-shadow: 0 0 15px 3px #FFD700, 0 0 30px 5px #fff70011; }
            70%, 90% { transform: scale(1.05); box-shadow: 0 0 35px 15px #FFD700, 0 0 70px 25px #fff70055; }
        }

        /* Ø¥Ø¶Ø§ÙØ© ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù„Ù„ØµÙˆØ± Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ h1 */
        h1 img {
            height: 150px; /* ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø¥Ù„Ù‰ 150 Ø¨ÙƒØ³Ù„ */
            vertical-align: middle;
            margin: 0 5px; /* Ù…Ø³Ø§ÙØ© Ø¨Ø³ÙŠØ·Ø© Ø¨ÙŠÙ† Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø£Ø®Ø±Ù‰ */
            border-radius: 50%; /* ÙŠØ¬Ø¹Ù„ ÙƒÙ„ Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø¯Ø§Ø¦Ø±ÙŠØ© */
            border: 5px solid #fff; /* Ø¥Ø·Ø§Ø± Ø£Ø¨ÙŠØ¶ ÙˆØ§Ø¶Ø­ */
            background: linear-gradient(135deg, #fffbe6 0%, #ffe066 100%); /* Ø®Ù„ÙÙŠØ© Ø°Ù‡Ø¨ÙŠØ© Ù†Ø§Ø¹Ù…Ø© */
            box-shadow: 0 8px 24px #ffd70055, 0 0 0 8px #fffbe622;
            /* Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ù‡Ù†Ø§ */
            /* perspective: 1000px;  Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù†Ø¸ÙˆØ± Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ (ÙŠÙ…ÙƒÙ† Ø¥Ø¨Ù‚Ø§Ø¤Ù‡ Ø£Ùˆ Ø¥Ø²Ø§Ù„ØªÙ‡ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©) */
            transition: all 0.3s ease-in-out; /* Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ù„Ø³ Ø¹Ù†Ø¯ Ø§Ù„ØªÙØ§Ø¹Ù„ */
        }

        h1 img:hover {
            transform: rotateY(15deg) rotateX(5deg) scale(1.05); /* Ø¯ÙˆØ±Ø§Ù† ÙˆØªÙƒØ¨ÙŠØ± Ø®ÙÙŠÙ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ… */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7),
                        0 0 0 8px rgba(255, 255, 255, 0.2) inset,
                        0 0 25px rgba(255, 255, 255, 0.5);
        }

        /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù€ highlight Ù„ØªØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø´Ø¹Ø§Ø±Ø§Øª */
        .infinity-highlight, .ahlan-chat-highlight {
            padding: 5px 12px;
            border-radius: 8px;
            /* Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ø¸Ù„Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø£Ùˆ Ø¹Ø¯Ù„Ù‡Ø§ Ù„ØªØªÙ†Ø§Ø³Ø¨ */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            /* ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´ÙØ§ÙØ© ØªØ³Ù…Ø­ Ø¨Ø¸Ù‡ÙˆØ± Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø© */
            background-color: rgba(255, 215, 0, 0.2); /* infinity-highlight */
            background-color: rgba(0, 255, 255, 0.15); /* ahlan-chat-highlight */
        }

        .infinity-highlight:hover, .ahlan-chat-highlight:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .settings-container {
            background-color: rgba(30, 40, 50, 0.85); /* Ù„ÙˆÙ† Ø¯Ø§ÙƒÙ† Ø´Ø¨Ù‡ Ø´ÙØ§Ù */
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
            padding: 20px;
            margin: 20px auto;
            max-width: 90%;
            width: 800px;
            display: none; /* Ù…Ø®ÙÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
            backdrop-filter: blur(8px); /* ØªØ£Ø«ÙŠØ± Ø¶Ø¨Ø§Ø¨ÙŠ */
            -webkit-backdrop-filter: blur(8px); /* Ù„Ø¯Ø¹Ù… Ù…ØªØµÙØ­Ø§Øª ÙˆÙŠØ¨ ÙƒÙŠØª */
        }

        .settings-container h2 {
            color: #fff;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .settings-container label {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
            color: #e0e0e0;
        }

        .settings-container input[type="number"],
        .settings-container input[type="text"] {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: 1px solid #555;
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1em;
            text-align: right;
            transition: border-color 0.3s ease, background-color 0.3s ease;
        }

        .settings-container input[type="number"]:focus,
        .settings-container input[type="text"]:focus {
            border-color: #00ffff;
            background-color: rgba(255, 255, 255, 0.2);
            outline: none;
        }

        .settings-container table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            overflow: hidden; /* Ù„Ø¶Ù…Ø§Ù† Ø­ÙˆØ§Ù Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„Ø®Ù„Ø§ÙŠØ§ */
        }

        .settings-container th,
        .settings-container td {
            padding: 12px 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            color: #f0f0f0;
        }

        .settings-container th {
            background-color: rgba(0, 0, 0, 0.4);
            font-size: 1.1em;
            font-weight: bold;
        }

        .settings-container tr:nth-child(even) {
            background-color: rgba(255, 255, 255, 0.05);
        }
        .settings-container tr:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .main-buttons-container {
            margin: 20px auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
            max-width: 90%;
            width: 1000px;
        }

        .main-buttons-container button,
        #showScoresBtn {
            padding: 12px 25px;
            font-size: 1.1em;
            font-family: 'Noto Naskh Arabic', sans-serif;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex; /* Ù„ØªÙˆØ³ÙŠØ· Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§Ù„Ù†Øµ */
            align-items: center;
            justify-content: center;
            gap: 8px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§Ù„Ù†Øµ */
        }

        .main-buttons-container button i,
        #showScoresBtn i {
            font-size: 1.2em; /* Ø­Ø¬Ù… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
        }

        .main-buttons-container button:hover,
        #showScoresBtn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
            filter: brightness(1.1); /* ØªÙØªÙŠØ­ Ø®ÙÙŠÙ */
        }

        #toggleBtn { background-color: #007bff; } /* Ø£Ø²Ø±Ù‚ */
        #toggleBtn:hover { background-color: #0056b3; }

        #startGameBtn { background-color: #28a745; } /* Ø£Ø®Ø¶Ø± */
        #startGameBtn:hover { background-color: #218838; }

        #restartGameBtn { background-color: #ffc107; color: #333; } /* Ø£ØµÙØ± */
        #restartGameBtn:hover { background-color: #e0a800; }

        #luckyHitBtn { background-color: #6f42c1; } /* Ø¨Ù†ÙØ³Ø¬ÙŠ */
        #luckyHitBtn:hover { background-color: #5a37a1; }

        #showScoresBtn { background-color: #17a2b8; } /* ØªØ±ÙƒÙˆØ§Ø² */
        #showScoresBtn:hover { background-color: #138496; }

        #volumeUpBtn, #volumeDownBtn {
            background-color: #6c757d; /* Ø±Ù…Ø§Ø¯ÙŠ */
            padding: 10px 15px;
            font-size: 1.0em;
        }
        #volumeUpBtn:hover, #volumeDownBtn:hover {
            background-color: #5a6268;
        }

        #muteToggleBtn {
            background-color: #dc3545; /* Ù„ÙˆÙ† Ø£Ø­Ù…Ø± */
        }
        #muteToggleBtn:hover {
            background-color: #c82333;
        }


        #gameArea {
            display: grid; /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Grid */
            grid-template-columns: repeat(7, 1fr); /* 7 Ø£Ø¹Ù…Ø¯Ø©ØŒ ÙƒÙ„ Ù…Ù†Ù‡Ø§ Ø¨Ù†ÙØ³ Ø§Ù„Ø¹Ø±Ø¶ */
            gap: 20px;
            margin: 30px auto;
            max-width: 1200px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.3); /* Ø®Ù„ÙÙŠØ© Ø´Ø¨Ù‡ Ø´ÙØ§ÙØ© ØªØ³Ù…Ø­ Ø¨Ø¸Ù‡ÙˆØ± ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© */
            border-radius: 20px;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.5);
            transition: all 0.5s ease-out;
        }

        .box {
            /* ØªØ¹Ø¯ÙŠÙ„ Ø¬Ø¯ÙŠØ¯: Ø¬Ø¹Ù„ Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ Ù…ØªØ¬Ø§ÙˆØ¨Ø© Ù…Ø¹ Grid */
            width: 100%; /* ØªØ£Ø®Ø° Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
            aspect-ratio: 1 / 1; /* Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø±Ø¨Ø¹ */
            min-width: 80px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø¹Ø±Ø¶ Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ù€ 7 ØµÙ†Ø§Ø¯ÙŠÙ‚ */
            max-width: 150px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¹Ø±Ø¶ */

            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Ø§Ù†ØªÙ‚Ø§Ù„ Ø£ÙƒØ«Ø± Ø­ÙŠÙˆÙŠØ© */
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .box:not(.opened) {
            background: linear-gradient(145deg, #0f1c3f 0%, #1a2a4b 50%, #0f1c3f 100%); /* ØªÙ… Ø§Ù„ØªØºÙŠÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ­Ù„ÙŠ */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5), inset 0 0 15px rgba(255, 255, 255, 0.4);
            /* animation: breatheBox 2s infinite alternate ease-in-out;  ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ù„ÙŠØªÙ… Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† ÙÙŠ Ø§Ù„Ù€ nth-child */
        }

        /* Ø­Ø±ÙƒØ§Øª Ø±Ù‚Øµ Ø¬Ø¯ÙŠØ¯Ø© */
        @keyframes danceRow1 {
            0% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(2deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(10px) rotate(-2deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        @keyframes danceRow2 {
            0% { transform: translateX(0) scale(1); }
            25% { transform: translateX(5px) scale(1.02); }
            50% { transform: translateX(0) scale(1); }
            75% { transform: translateX(-5px) scale(0.98); }
            100% { transform: translateX(0) scale(1); }
        }

        @keyframes danceRow3 {
            0% { transform: scale(1) skewX(0deg); }
            50% { transform: scale(1.05) skewX(3deg); }
            100% { transform: scale(1) skewX(0deg); }
        }

        @keyframes danceRow4 {
            0% { opacity: 1; }
            50% { opacity: 0.9; }
            100% { opacity: 1; }
        }

        /* ØªØ·Ø¨ÙŠÙ‚ Ø­Ø±ÙƒØ§Øª Ù…Ø®ØªÙ„ÙØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±ØªÙŠØ¨ (Ù„Ø¥ÙŠØ­Ø§Ø¡ Ø§Ù„ØµÙÙˆÙ) */
        /* ØªØ¹Ø¯ÙŠÙ„ :nth-child Ù„ÙŠØ¹Ù…Ù„ Ù…Ø¹ 7 Ø£Ø¹Ù…Ø¯Ø© (7n + x) */
        .box:not(.opened):nth-child(7n + 1),
        .box:not(.opened):nth-child(7n + 5) {
            animation: danceRow1 3s infinite alternate ease-in-out;
        }

        .box:not(.opened):nth-child(7n + 2),
        .box:not(.opened):nth-child(7n + 6) {
            animation: danceRow2 4s infinite alternate ease-in-out;
        }

        .box:not(.opened):nth-child(7n + 3),
        .box:not(.opened):nth-child(7n + 7) {
            animation: danceRow3 3.5s infinite alternate ease-in-out;
        }

        .box:not(.opened):nth-child(7n + 4) {
            animation: danceRow4 2.5s infinite alternate ease-in-out;
        }

        .box:hover:not(.opened) {
            transform: scale(1.08) translateY(-5px); /* ØªØ£Ø«ÙŠØ± ØªØ­ÙˆÙŠÙ… Ø£Ù‚ÙˆÙ‰ */
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.6);
            animation: none; /* Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ†ÙØ³ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ… */
        }

        .box.opened {
            background: linear-gradient(145deg, #2D004B 0%, #4B0082 100%); /* ØªÙ… Ø§Ù„ØªØºÙŠÙŠØ± Ø¥Ù„Ù‰ ØªØ¯Ø±Ø¬ Ø¨Ù†ÙØ³Ø¬ÙŠ Ø£ØºÙ…Ù‚ */
            box-shadow: none;
            border: 2px dashed rgba(255, 255, 255, 0.3); /* Ø¥Ø·Ø§Ø± Ù…ØªÙ‚Ø·Ø¹ */
            animation: spinBox 1s forwards ease-out; /* Ø¯ÙˆØ±Ø§Ù† Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­ */
        }

        .box.golden.opened {
            background: linear-gradient(145deg, #f79d00, #64f38c); /* ØªØ¯Ø±Ø¬ Ø°Ù‡Ø¨ÙŠ Ù…Ù…ÙŠØ² */
            border: 3px solid #FFD700; /* Ø¥Ø·Ø§Ø± Ø°Ù‡Ø¨ÙŠ Ø¨Ø§Ø±Ø² */
        }

        /* ÙƒÙ„Ø§Ø³ Ø¬Ø¯ÙŠØ¯ Ù„Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙˆØªØ­Ø±ÙŠÙƒÙ‡ */
        .box.hiding {
            opacity: 0;
            transform: scale(0.1);
            pointer-events: none; /* ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø®ÙØ§Ø¡ */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out; /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ */
        }

        @keyframes breatheBox {
            from { transform: scale(1); }
            to { transform: scale(1.03); }
        }

        @keyframes spinBox {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }

        .box-number {
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: clamp(0.7em, 3vw, 0.9em); /* Ø¬Ø¹Ù„ Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ù…ØªØ¬Ø§ÙˆØ¨Ù‹Ø§ */
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .infinity-text {
            font-family: 'Amiri', serif;
            font-size: clamp(1.5em, 4vw, 1.8em); /* ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ Ù„Ø¬Ø¹Ù„ Ø§Ù„Ù†Øµ ÙŠØ¸Ù‡Ø± ÙƒØ§Ù…Ù„Ø§ */
            color: #fff;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.8);
            position: relative;
            z-index: 2;
        }

        .initial-display, .opened-display {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            backface-visibility: hidden; /* Ù„Ù…Ù†Ø¹ ÙˆÙ…ÙŠØ¶ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø§Ù† */
            transition: opacity 0.5s ease;
        }

        .box.opened .initial-display {
            opacity: 0;
            pointer-events: none;
        }

        .box.opened .opened-display {
            opacity: 1;
            transform: rotateY(0deg); /* Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¯ÙˆØ±Ø§Ù† Ù„Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ */
        }

        .opened-display {
            opacity: 0;
            transform: rotateY(180deg); /* Ù…Ø®ÙÙŠ ÙˆÙ…Ù‚Ù„ÙˆØ¨ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        .initial-display .cover-img {
            max-width: 50%; /* ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ Ù„Ø¬Ø¹Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø£ØµØºØ± */
            max-height: 50%; /* ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ Ù„Ø¬Ø¹Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø£ØµØºØ± */
            object-fit: contain;
            margin-top: 10px; /* Ù„ØªØ±Ùƒ Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø±Ù‚Ù… */
        }

        .opened-display .reward-img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
            margin-bottom: 5px;
            /* Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§Ø­Ø© Ø³ÙÙ„ÙŠØ© Ù„Ø¯ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ù„Ø£Ø¹Ù„Ù‰ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            padding-bottom: 30px;
        }

        .gift-points {
            font-family: 'Amiri', serif;
            font-size: clamp(1.2em, 5vw, 1.8em); /* Ø¬Ø¹Ù„ Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ù…ØªØ¬Ø§ÙˆØ¨Ù‹Ø§ */
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            direction: ltr; /* Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØªØ¸Ù‡Ø± Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ */
            /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© Ù„Ø¶Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ */
            position: absolute; /* ÙˆØ¶Ø¹ Ù…Ø·Ù„Ù‚ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ .opened-display */
            bottom: 5px; /* Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ */
            left: 50%; /* ØªÙˆØ³ÙŠØ· Ø£ÙÙ‚ÙŠ */
            transform: translateX(-50%); /* Ø¥Ø²Ø§Ø­Ø© Ù„Ù…Ù†ØªØµÙ Ø§Ù„Ø¹Ù†ØµØ± */
            width: 100%; /* Ù„Ø¶Ù…Ø§Ù† Ø£Ù† Ø§Ù„Ù€ text-align: center ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ */
            text-align: center; /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ù†Øµ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¹Ù†ØµØ± */
        }

        .gift-points.golden {
            font-size: clamp(1.5em, 7vw, 2.2em); /* Ø¬Ø¹Ù„ Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ù…ØªØ¬Ø§ÙˆØ¨Ù‹Ø§ */
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7), 0 0 20px rgba(255, 215, 0, 0.5);
        }

        #message {
            font-size: 1.3em;
            font-weight: bold;
            color: #ffd700; /* Ù„ÙˆÙ† Ø°Ù‡Ø¨ÙŠ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ */
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.8);
            margin: 20px auto;
            min-height: 30px; /* Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø§Ù‡ØªØ²Ø§Ø² Ø§Ù„ØªØ®Ø·ÙŠØ· */
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            max-width: 700px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            /* animation for messages */
            animation: fadeInMessage 0.5s ease forwards;
        }

        @keyframes fadeInMessage {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #scoresTableArea {
            background-color: rgba(30, 40, 50, 0.9);
            border-radius: 15px;
            padding: 25px;
            margin: 30px auto;
            max-width: 900px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            display: none; /* Ù…Ø®ÙÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        #scoresTableArea h2 {
            color: #fff;
            margin-bottom: 20px;
            font-size: 2em;
        }

        #scoresTableArea table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        #scoresTableArea th,
        #scoresTableArea td {
            padding: 12px 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: right;
            color: #f0f0f0;
        }

        #scoresTableArea th {
            background-color: rgba(0, 0, 0, 0.5);
            font-size: 1.2em;
            font-weight: bold;
        }

        #scoresTableArea tr:nth-child(even) {
            background-color: rgba(255, 255, 255, 0.05);
        }
        #scoresTableArea tr:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        #scoresTableArea .player-score-total {
            font-weight: bold;
            font-size: 1.3em;
            color: #FFD700; /* Ù„ÙˆÙ† Ø°Ù‡Ø¨ÙŠ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹ */
        }
        #scoresTableArea .player-score-list {
            font-size: 0.9em;
            color: #ccc;
        }

        /* Lucky Hit Top Icons Container (Updated) */
        #luckyHitTopIconsContainer {
            /* ØªÙ… Ø¥Ø²Ø§Ù„Ø©: position: fixed; */
            /* ØªÙ… Ø¥Ø²Ø§Ù„Ø©: top: 20px; */
            /* ØªÙ… Ø¥Ø²Ø§Ù„Ø©: left: 50%; */
            /* ØªÙ… Ø¥Ø²Ø§Ù„Ø©: transform: translateX(-50%); */
            
            display: flex; /* Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¨Ø¬Ø§Ù†Ø¨ Ø¨Ø¹Ø¶Ù‡Ø§ Ø§Ù„Ø¨Ø¹Ø¶ */
            gap: 15px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
            z-index: 1000; /* ÙŠÙ…ÙƒÙ† ØªÙ‚Ù„ÙŠÙ„ Ù‡Ø°Ø§ Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¹Ø¯ ÙŠØ·ÙÙˆ ÙÙˆÙ‚ Ø¹Ù†Ø§ØµØ± Ø£Ø®Ø±Ù‰ */
            pointer-events: none; /* Ù„ØªØ¬Ø§Ù‡Ù„ Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø§ÙˆØ³ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§ÙˆÙŠØ© ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
            opacity: 0; /* Ù…Ø®ÙÙŠØ© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
            transition: opacity 0.5s ease-in-out; /* Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ù„Ø³ Ù„Ù„Ø¸Ù‡ÙˆØ± ÙˆØ§Ù„Ø§Ø®ØªÙØ§Ø¡ */
            flex-wrap: wrap; /* ØªØ³Ù…Ø­ Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¨Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø´Ø§Ø´Ø© ØµØºÙŠØ±Ø© */
            justify-content: center; /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ø§ÙˆÙŠØ© */

            /* Ø®ØµØ§Ø¦Øµ Ø§Ù„ØªÙˆØ¶Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
            margin: 30px auto; /* Ù…Ø³Ø§ÙØ© 30 Ø¨ÙƒØ³Ù„ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ ÙˆØªÙˆØ³ÙŠØ· Ø£ÙÙ‚ÙŠ */
            max-width: 90%; /* Ù„Ù…Ù†Ø¹ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ù…Ù† Ø£Ù† ØªÙƒÙˆÙ† Ø¹Ø±ÙŠØ¶Ø© Ø¬Ø¯Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        }

        .lucky-hit-top-icon {
            width: 120px;
            height: 120px;
            background: linear-gradient(145deg, #232946 60%, #eebd89 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37), 0 0 40px 10px rgba(255, 215, 0, 0.25);
            border: 4px solid rgba(255,255,255,0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: visible;
        }
        .lucky-hit-top-icon::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.1) 80%, transparent 100%);
            pointer-events: none;
            z-index: 2;
        }
        .lucky-hit-top-icon img {
            width: 90%;
            height: 90%;
            object-fit: contain;
            filter: drop-shadow(0 0 15px #ffd700) drop-shadow(0 0 5px #fff);
        }
        .lucky-hit-top-icon.pulsing {
            animation: pulseLuckyHitGold 0.7s infinite alternate, glowShadow 2s infinite alternate;
        }
        @keyframes glowShadow {
            0% { box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37), 0 0 40px 10px rgba(255, 215, 0, 0.25); }
            100% { box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37), 0 0 80px 20px rgba(255, 215, 0, 0.5); }
        }

        /* Ø£Ù„ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù‡Ø§Ù„Ø© */
        .lucky-hit-top-icon.glow-blue {
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.7); /* Ø£Ø²Ø±Ù‚ Ø³Ù…Ø§ÙˆÙŠ */
        }
        .lucky-hit-top-icon.glow-purple {
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.7); /* Ø¨Ù†ÙØ³Ø¬ÙŠ */
        }
        .lucky-hit-top-icon.glow-green {
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.7); /* Ø£Ø®Ø¶Ø± */
        }
        .lucky-hit-top-icon.glow-orange {
            box-shadow: 0 0 15px rgba(255, 165, 0, 0.7); /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ */
        }
        .lucky-hit-top-icon.glow-pink {
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.7); /* ÙˆØ±Ø¯ÙŠ */
        }
        .lucky-hit-top-icon.glow-red {
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.7); /* Ø£Ø­Ù…Ø± */
        }
        .lucky-hit-top-icon.glow-gold {
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.7); /* Ø°Ù‡Ø¨ÙŠ */
        }

        .lucky-hit-top-icon img {
            width: 90%; /* Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            height: 90%; /* Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            object-fit: contain;
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¨Ø¶ (ØªÙØ§Ø¹Ù„ ÙˆÙ‡Ù…ÙŠ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰) */
        @keyframes pulseLuckyHitBlue {
            0% { transform: scale(1); box-shadow: 0 0 15px rgba(0, 255, 255, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 25px rgba(0, 255, 255, 1), 0 0 35px rgba(0, 255, 255, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 15px rgba(0, 255, 255, 0.7); }
        }
        @keyframes pulseLuckyHitPurple {
            0% { transform: scale(1); box-shadow: 0 0 15px rgba(138, 43, 226, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 25px rgba(138, 43, 226, 1), 0 0 35px rgba(138, 43, 226, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 15px rgba(138, 43, 226, 0.7); }
        }
        @keyframes pulseLuckyHitGreen {
            0% { transform: scale(1); box-shadow: 0 0 15px rgba(0, 255, 0, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 25px rgba(0, 255, 0, 1), 0 0 35px rgba(0, 255, 0, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 15px rgba(0, 255, 0, 0.7); }
        }
        @keyframes pulseLuckyHitOrange {
            0% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 165, 0, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 25px rgba(255, 165, 0, 1), 0 0 35px rgba(255, 165, 0, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 165, 0, 0.7); }
        }
        @keyframes pulseLuckyHitPink {
            0% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 20, 147, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 25px rgba(255, 20, 147, 1), 0 0 35px rgba(255, 20, 147, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 20, 147, 0.7); }
        }
        @keyframes pulseLuckyHitRed {
            0% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 0, 0, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 25px rgba(255, 0, 0, 1), 0 0 35px rgba(255, 0, 0, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 0, 0, 0.7); }
        }
        @keyframes pulseLuckyHitGold {
            0% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 215, 0, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 25px rgba(255, 215, 0, 1), 0 0 35px rgba(255, 215, 0, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 215, 0, 0.7); }
        }

        /* ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ø¨Ø¶ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù„ÙˆÙ†ÙŠØ© */
        /* ØªÙ…Øª Ø¥Ø²Ø§Ù„Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ù‡Ù†Ø§ Ù„ØªØªÙ… Ø¥Ø¯Ø§Ø±ØªÙ‡ Ø¹Ø¨Ø± JS */
        .lucky-hit-top-icon.pulsing.glow-blue { animation: pulseLuckyHitBlue 0.7s infinite alternate; }
        .lucky-hit-top-icon.pulsing.glow-purple { animation: pulseLuckyHitPurple 0.7s infinite alternate; }
        .lucky-hit-top-icon.pulsing.glow-green { animation: pulseLuckyHitGreen 0.7s infinite alternate; }
        .lucky-hit-top-icon.pulsing.glow-orange { animation: pulseLuckyHitOrange 0.7s infinite alternate; }
        .lucky-hit-top-icon.pulsing.glow-pink { animation: pulseLuckyHitPink 0.7s infinite alternate; }
        .lucky-hit-top-icon.pulsing.glow-red { animation: pulseLuckyHitRed 0.7s infinite alternate; }
        .lucky-hit-top-icon.pulsing.glow-gold { animation: pulseLuckyHitGold 0.7s infinite alternate; }

        /* Ù„Ù‚Ø·Ø§Ø¹Ø§Øª Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 1200px) { /* ØªØ¹Ø¯ÙŠÙ„: Ù„Ù€ gameArea Ù„Ù„ØªØ­ÙƒÙ… Ø¨Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© */
            #gameArea {
                grid-template-columns: repeat(6, 1fr); /* 6 Ø£Ø¹Ù…Ø¯Ø© */
            }
        }
        @media (max-width: 992px) {
            h1 {
                font-size: 1.8em;
            }
            h1 img {
                height: 100px; /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø£ØµØºØ± */
            }
            #gameArea {
                grid-template-columns: repeat(5, 1fr); /* 5 Ø£Ø¹Ù…Ø¯Ø© */
            }
            .lucky-hit-top-icon {
                width: 100px; /* ØªØµØºÙŠØ± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
                height: 100px;
            }
        }
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }
            h1 img {
                height: 75px; /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø£ÙƒØ«Ø± */
            }
            .main-buttons-container button {
                padding: 10px 15px;
                font-size: 0.9em;
                gap: 5px;
            }
            .main-buttons-container button i {
                font-size: 1em;
            }
            #message {
                font-size: 1.1em;
            }
            .settings-container, #scoresTableArea {
                padding: 15px;
                margin: 15px auto;
            }
            .settings-container th, .settings-container td,
            #scoresTableArea th, #scoresTableArea td {
                padding: 8px 10px;
                font-size: 0.9em;
            }
            #gameArea {
                grid-template-columns: repeat(4, 1fr); /* 4 Ø£Ø¹Ù…Ø¯Ø© */
            }
            .lucky-hit-top-icon {
                width: 80px; /* ØªØµØºÙŠØ± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø£ÙƒØ«Ø± */
                height: 80px;
            }
            #luckyHitTopIconsContainer {
                gap: 10px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5em;
            }
            h1 img {
                height: 50px; /* Ø£ØµØºØ± Ø­Ø¬Ù… Ù„Ù„Ø´Ø¹Ø§Ø±Ø§Øª */
            }
            .main-buttons-container {
                flex-direction: column;
                gap: 10px;
            }
            .main-buttons-container button {
                width: 80%;
            }
            #message {
                font-size: 1em;
            }
            #gameArea {
                grid-template-columns: repeat(3, 1fr); /* 3 Ø£Ø¹Ù…Ø¯Ø© */
            }
            .lucky-hit-top-icon {
                width: 60px; /* Ø£ØµØºØ± Ø­Ø¬Ù… Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
                height: 60px;
            }
            #luckyHitTopIconsContainer {
                gap: 8px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
            }
        }
        /* ØªØ£Ø«ÙŠØ± Ù‚Ù„Ø¨ Ù†Ø§Ø¨Ø¶ Ø­ÙˆÙ„ infinity_logo */
        .infinity-highlight img[src="infinity_logo.png"] {
            border-radius: 16px; /* Ù…Ø³ØªØ·ÙŠÙ„ Ø¨Ø­ÙˆØ§Ù Ø¯Ø§Ø¦Ø±ÙŠØ© */
            border: 4px solid #FFD700; /* Ø¥Ø·Ø§Ø± Ø°Ù‡Ø¨ÙŠ */
            background: linear-gradient(135deg, #fffbe6 0%, #ffe066 100%);
            box-shadow: 0 4px 18px #ffd70055, 0 0 0 6px #fffbe622;
            padding: 6px 18px;
            height: 80px;
            width: auto;
            position: relative;
            box-shadow: 0 0 30px 10px #ff69b4, 0 0 60px 20px #ffb6c1;
            animation: heartbeat 1.2s infinite;
            background: radial-gradient(circle at 60% 40%, #ffb6c1 40%, transparent 70%);
        }
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            10%, 30% { transform: scale(1.08); }
            20%, 40% { transform: scale(0.96); }
            50% { transform: scale(1.12); }
            60% { transform: scale(0.92); }
            70%, 90% { transform: scale(1.05); }
        }

        /* Ø¥Ø¶Ø§ÙØ© ØªØ±Ø³ Ø°Ù‡Ø¨ÙŠ ØµØºÙŠØ± ÙŠØ¯ÙˆØ± Ø¨Ø¬Ø§Ù†Ø¨ ahlan_logo */
        .ahlan-chat-highlight {
            position: relative;
            display: inline-flex;
            align-items: center;
        }
        .ahlan-chat-highlight::after {
            content: "";
            display: inline-block;
            width: 32px;
            height: 32px;
            margin-right: 8px;
            background: url('https://cdn-icons-png.flaticon.com/512/126/126472.png') no-repeat center/contain;
            animation: spin-gear 2s linear infinite;
            filter: drop-shadow(0 0 6px gold);
        }
        @keyframes spin-gear {
            100% { transform: rotate(360deg); }
        }
    
.game-header {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 30px;
  padding: 20px 0;
  background-color: rgba(0, 0, 0, 0.4);
  border-bottom: 2px solid #FFD700;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
  margin-bottom: 20px;
}

.game-logo {
  height: 100px;
  width: auto;
  border-radius: 50%;
  border: 4px solid #fff;
  box-shadow: 0 0 20px #FFD700, 0 0 40px rgba(255, 255, 255, 0.3);
  background-color: #fff;
  transition: transform 0.3s ease-in-out;
}

.game-logo:hover {
  transform: scale(1.1) rotate(3deg);
}


.logo-text {
  font-size: 1.6em;
  font-weight: bold;
  color: #FFD700;
  text-shadow: 1px 1px 4px #000;
  font-family: 'Scheherazade New', serif;
  background-color: rgba(255, 255, 255, 0.1);
  padding: 10px 20px;
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
}

</style>
</head>
<body>
    
    
<header class="game-header">
    <img src="ahlan_logo.png" alt="Ø´Ø¹Ø§Ø± Ø£Ù‡Ù„Ø§Ù‹" class="game-logo">
    <div class="logo-text">ahlan live Chat ğŸ•Šï¸ INFINITY-64</div>
    <img src="infinity_logo.png" alt="Ø´Ø¹Ø§Ø± INFINITY" class="game-logo">
</header>

    
    <p style="font-size: 2.9em; color: #bbb;">Ù…ÙÙ‚Ø¯Ù…Ø© Ù„ÙƒÙ… Ù…Ù† ÙØ±ÙŠÙ‚ <span class="infinity-highlight">INFINITY</span></p>
    <p style="font-size: 0.8em; color: #999;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: 2024/6/1 - ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­Ø¯ÙŠØ«: 2025/6/1</p>

    <div class="main-buttons-container">
        <button id="toggleBtn"><i class="fas fa-cog"></i> Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        <button id="startGameBtn"><i class="fas fa-play"></i> Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
        <button id="restartGameBtn"><i class="fas fa-redo-alt"></i> Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
        <button id="luckyHitBtn"><i class="fas fa-star"></i> Ø¶Ø±Ø¨Ø© Ù…Ø¬Ù†ÙˆÙ†Ø©!</button>
        <button id="volumeUpBtn"><i class="fas fa-volume-up"></i></button>
        <button id="volumeDownBtn"><i class="fas fa-volume-down"></i></button>
        <button id="muteToggleBtn"><i class="fas fa-volume-mute"></i> ÙƒØªÙ… Ø§Ù„ØµÙˆØª</button>
    </div>

    <div id="luckyHitTopIconsContainer">
        </div>

    <div id="settingsArea" class="settings-container">
        <h2>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>
        <div>
            <label for="numPlayers">Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†:</label>
            <input type="number" id="numPlayers" value="2" min="1" max="10">
        </div>
        <div>
            <label for="numBoxes">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚:</label>
            <input type="number" id="numBoxes" value="10" min="1" max="50">
        </div>
        <div class="player-inputs-area">
            <h3>Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h3>
            <table id="playerInputsTable">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ù„Ø§Ø¹Ø¨</th>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                    </tr>
                </thead>
                <tbody id="playerInputsTableBody">
                    </tbody>
            </table>
        </div>
        <div class="box-inputs-area">
            <h3>Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚</h3>
            <table id="boxInputsTable">
                <thead>
                    <tr>
                        <th>Ø±Ù‚Ù… Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚</th>
                        <th>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚</th>
                    </tr>
                </thead>
                <tbody id="boxInputsTableBody">
                    </tbody>
            </table>
        </div>
    </div>

    <button id="showScoresBtn" style="display: none; margin: 20px auto;"><i class="fas fa-trophy"></i> Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>

    <div id="gameArea">
        </div>

    <p id="message" aria-live="polite">Ù‚Ù… Ø¨Ø¶Ø¨Ø· Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø§ Ø§Ù„Ù„Ø¹Ø¨Ø©".</p>

    <div id="scoresTableArea">
        <h2>Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
        <table id="scoresTable">
            </table>
    </div>

    <audio id="audioPlayer" src="open.mp3"></audio>
    <audio id="backgroundMusic" src="game_music.mp3" loop></audio>
    <audio id="luckyHitAudio" src="lucky_hit_sound.mp3"></audio>

    <script>
        const audioPlayer = document.getElementById('audioPlayer');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const luckyHitAudio = document.getElementById('luckyHitAudio');
        let boxData = [];
        let gameActive = false;
        let openedBoxes = [];
        let playerScores = [];
        let currentPlayer = 0;
        let luckyHitAudioTimeout = null;
        let luckyHitPulseTimeout = null; // Ù…Ø¤Ù‚Øª Ø¬Ø¯ÙŠØ¯ Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù†Ø¨Ø¶
        let isLuckyHitActiveGlobally = false;
        let luckyHitBoxToOpen = null;

        // ÙˆØ¸Ø§Ø¦Ù Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function saveSettings() {
            const numPlayers = document.getElementById('numPlayers').value;
            const numBoxes = document.getElementById('numBoxes').value;
            const playerNames = Array.from(document.querySelectorAll('#playerInputsTableBody input[type="text"]')).map(input => input.value);

            const settings = {
                numPlayers: numPlayers,
                numBoxes: numBoxes,
                playerNames: playerNames
            };
            localStorage.setItem('gameSettings', JSON.stringify(settings));
            renderPlayerInputs();
            renderBoxInputs();
            console.log("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.");
        }

        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('gameSettings'));
            if (settings) {
                document.getElementById('numPlayers').value = settings.numPlayers || 2;
                document.getElementById('numBoxes').value = settings.numBoxes || 10;
                renderPlayerInputs(settings.playerNames);
                renderBoxInputs();
            } else {
                renderPlayerInputs();
                renderBoxInputs();
            }
        }

        function renderPlayerInputs(savedNames = []) {
            const numPlayers = parseInt(document.getElementById('numPlayers').value);
            const playerInputsTableBody = document.getElementById('playerInputsTableBody');
            playerInputsTableBody.innerHTML = '';

            for (let i = 0; i < numPlayers; i++) {
                const row = playerInputsTableBody.insertRow();
                const cell1 = row.insertCell(0);
                const cell2 = row.insertCell(1);
                cell1.textContent = `Ø§Ù„Ù„Ø§Ø¹Ø¨ ${i + 1}`;
                const playerName = savedNames[i] || `Ø§Ù„Ù„Ø§Ø¹Ø¨ ${i + 1}`;
                cell2.innerHTML = `<input type="text" value="${playerName}" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ ${i + 1}">`;
            }
        }

        function renderBoxInputs() {
            const numBoxes = parseInt(document.getElementById('numBoxes').value);
            const boxInputsTableBody = document.getElementById('boxInputsTableBody');
            boxInputsTableBody.innerHTML = '';

            for (let i = 0; i < numBoxes; i++) {
                const row = boxInputsTableBody.insertRow();
                const cell1 = row.insertCell(0);
                const cell2 = row.insertCell(1);
                cell1.textContent = `ØµÙ†Ø¯ÙˆÙ‚ ${i + 1}`;
                cell2.textContent = `ØµÙ†Ø¯ÙˆÙ‚ INFINITY`;
            }
        }

        function renderBoxes() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';

            const availableBoxes = boxData.filter(box => !box.opened);
            availableBoxes.forEach((box, index) => {
                const boxElement = document.createElement('div');
                boxElement.classList.add('box');
                boxElement.dataset.boxId = box.id;

                boxElement.innerHTML = `
                    <div class="box-number">${index + 1}</div>
                    <div class="initial-display">
                        <img src="${box.coverImage}" alt="ØºØ·Ø§Ø¡ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚" class="cover-img">
                        <div class="infinity-text">INFINITY</div>
                    </div>
                    <div class="opened-display" style="opacity: 0;">
                        <img src="${box.rewardImage}" alt="Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©" class="reward-img">
                        <div class="gift-points ${box.golden ? 'golden' : ''}">${box.points > 0 ? '+' : ''}${box.points}</div>
                    </div>
                `;
                boxElement.addEventListener('click', (event) => {
                    const clickedBoxId = boxElement.dataset.boxId; // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù€ ID Ù…Ù† Ø§Ù„Ù€ dataset
                    // Ù…Ù†Ø¹ ÙØªØ­ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø© Ù†Ø´Ø·Ø© ÙˆÙ…Ø§ Ø²Ø§Ù„Øª ØªÙ†ØªØ¸Ø± ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚Ù‡Ø§ Ø§Ù„Ø®Ø§Øµ
                    if (isLuckyHitActiveGlobally && clickedBoxId !== luckyHitBoxToOpen?.id) {
                        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Lucky Hit Ù†Ø´Ø·Ø© ÙˆØªÙ… Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ ØµÙ†Ø¯ÙˆÙ‚ Ø¢Ø®Ø±ØŒ Ù„Ø§ ØªÙØ¹Ù„ Ø´ÙŠØ¦Ù‹Ø§
                        return;
                    }
                    openBox(boxElement, clickedBoxId);
                });
                gameArea.appendChild(boxElement);
            });
        }

        function startGame() {
            if (gameActive) {
                if (!confirm("Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¬Ø§Ø±ÙŠØ©. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯ØŸ")) {
                    return;
                }
            }

            saveSettings();

            const numPlayers = parseInt(document.getElementById('numPlayers').value);
            const numBoxes = parseInt(document.getElementById('numBoxes').value);
            const playerInputElements = document.querySelectorAll('#playerInputsTableBody input[type="text"]');

            playerScores = [];
            playerInputElements.forEach((input, index) => {
                playerScores.push({
                    id: index,
                    name: input.value || `Ø§Ù„Ù„Ø§Ø¹Ø¨ ${index + 1}`,
                    score: 0,
                    openedBoxes: []
                });
            });
            currentPlayer = 0;

            boxData = [];
            openedBoxes = [];
            const allPoints = [];
            const numDeduct = Math.floor(numBoxes * 0.2);

            for (let i = 0; i < numBoxes; i++) {
                const points = Math.floor(Math.random() * (1000 - 25 + 1)) + 25;
                allPoints.push(points);
            }

            for (let i = 0; i < numDeduct; i++) {
                const randomIndex = Math.floor(Math.random() * allPoints.length);
                allPoints[randomIndex] = -(Math.floor(Math.random() * (1000 - 25 + 1)) + 25);
            }

            for (let i = 0; i < numBoxes; i++) {
                let isGolden = Math.random() < 0.05;
                let boxPoints = allPoints[i];
                let boxSound = 'open.mp3';
                let rewardImage = 'box_open.png';

                if (isGolden) {
                    boxPoints = Math.floor(Math.random() * (2500 - 1500 + 1)) + 1500;
                    boxSound = 'golden_sound.mp3';
                    rewardImage = 'golden_reward.png';
                }

                boxData.push({
                    id: `box-${i + 1}`,
                    name: `ØµÙ†Ø¯ÙˆÙ‚ INFINITY ${i + 1}`,
                    points: boxPoints,
                    opened: false,
                    golden: isGolden,
                    sound: boxSound,
                    coverImage: 'AH11.PNG',
                    rewardImage: rewardImage,
                    originalNumber: i + 1
                });
            }

            boxData = shuffleArray(boxData);
            renderBoxes();

            gameActive = true;
            backgroundMusic.volume = 0.5;
            backgroundMusic.play().catch(e => console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ©:", e));
            document.getElementById('scoresTableArea').style.display = 'none';
            toggleSettings(true);
            updateButtonVisibility();
            document.getElementById('message').textContent = `Ø¯ÙˆØ± ${playerScores[currentPlayer].name}. Ø§ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚Ù‹Ø§!`;

            stopAllLuckyHitEffects(); // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¶Ø±Ø¨Ø© Ù…Ø¬Ù†ÙˆÙ†Ø© Ù†Ø´Ø·Ø© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
        }

        function restartGameWithoutSettings() {
            if (!gameActive) {
                alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ù„Ø¹Ø¨Ø© Ø¬Ø§Ø±ÙŠØ© Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„Ù‡Ø§.");
                return;
            }
            if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©ØŸ Ø³ØªÙÙ‚Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø­Ø§Ù„ÙŠØ©.")) {
                return;
            }
            startGame();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function openBox(boxElement, originalBoxId) {
            // Ù…Ù†Ø¹ ÙØªØ­ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø© Ù†Ø´Ø·Ø© ÙˆÙ…Ø§ Ø²Ø§Ù„Øª ØªÙ†ØªØ¸Ø± ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚Ù‡Ø§ Ø§Ù„Ø®Ø§Øµ
            if (isLuckyHitActiveGlobally && originalBoxId !== luckyHitBoxToOpen?.id) {
                return;
            }

            const boxIndex = boxData.findIndex(box => box.id === originalBoxId);
            if (boxIndex === -1 || boxData[boxIndex].opened) {
                return;
            }

            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ø°Ø§ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙŠÙÙØªØ­ ÙƒØ¬Ø²Ø¡ Ù…Ù† Lucky Hit
            if (isLuckyHitActiveGlobally && originalBoxId === luckyHitBoxToOpen.id) {
                // Ø¨Ù…Ø¬Ø±Ø¯ ÙØªØ­ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù€ Lucky HitØŒ Ù‚Ù… Ø¨Ù…Ø³Ø­ Ø§Ù„Ù€ luckyHitBoxToOpen
                luckyHitBoxToOpen = null;
            }

            const box = boxData[boxIndex];
            box.opened = true;
            openedBoxes.push(originalBoxId);

            playerScores[currentPlayer].score += box.points;
            playerScores[currentPlayer].openedBoxes.push({
                name: `ØµÙ†Ø¯ÙˆÙ‚ ${box.originalNumber}`,
                points: box.points,
                golden: box.golden
            });

            boxElement.classList.add('opened');
            if (box.golden) {
                boxElement.classList.add('golden');
            }

            const initialDisplay = boxElement.querySelector('.initial-display');
            const openedDisplay = boxElement.querySelector('.opened-display');
            initialDisplay.style.opacity = '0';
            openedDisplay.style.opacity = '1';
            openedDisplay.style.transform = 'rotateY(0deg)';

            audioPlayer.src = box.sound;
            audioPlayer.play().catch(e => console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚:", e));

            // Ø±Ø³Ø§Ù„Ø© Ù…Ø®ØªÙ„ÙØ© Ø¥Ø°Ø§ ØªÙ… ÙØªØ­ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø¨ÙˆØ§Ø³Ø·Ø© Lucky Hit
            if (isLuckyHitActiveGlobally) {
                 document.getElementById('message').textContent = `Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø© ÙØªØ­Øª ØµÙ†Ø¯ÙˆÙ‚Ù‹Ø§! ${playerScores[currentPlayer].name} Ø­ØµÙ„ Ø¹Ù„Ù‰ ${box.points} Ù†Ù‚Ø·Ø©. Ø±ØµÙŠØ¯Ù‡ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${playerScores[currentPlayer].score}.`;
            } else {
                 document.getElementById('message').textContent = `${playerScores[currentPlayer].name} Ø­ØµÙ„ Ø¹Ù„Ù‰ ${box.points} Ù†Ù‚Ø·Ø©. Ø±ØµÙŠØ¯Ù‡ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${playerScores[currentPlayer].score}.`;
            }

            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ù…Ù† DOM Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†Ù
            setTimeout(() => {
                boxElement.classList.add('hiding');
                boxElement.addEventListener('transitionend', () => {
                    boxElement.remove();
                }, { once: true });
            }, 5000);

            if (openedBoxes.length === boxData.length) {
                gameActive = false;
                document.getElementById('message').textContent = `Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!`;
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0;
                stopAllLuckyHitEffects();
                showScores();
                updateButtonVisibility();
            } else {
                // Ù„Ø§ Ù†Ù†ØªÙ‚Ù„ Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Lucky Hit Ù†Ø´Ø·Ø© (Ø§Ù„ØµÙˆØª ÙŠØ¹Ù…Ù„)
                // Ù„Ø£Ù† Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø³ÙŠØ­Ø¯Ø« Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù€ 60 Ø«Ø§Ù†ÙŠØ©.
                if (!isLuckyHitActiveGlobally) {
                    currentPlayer = (currentPlayer + 1) % playerScores.length;
                    setTimeout(() => {
                        document.getElementById('message').textContent = `Ø¯ÙˆØ± ${playerScores[currentPlayer].name}. Ø§ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚Ù‹Ø§!`;
                    }, 1500);
                }
            }
            updateButtonVisibility();
        }

        function showScores() {
            const scoresTableArea = document.getElementById('scoresTableArea');
            const scoresTable = document.getElementById('scoresTable');
            scoresTable.innerHTML = '';

            const sortedPlayers = [...playerScores].sort((a, b) => b.score - a.score);

            let tableHTML = `
                <thead>
                    <tr>
                        <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                        <th>Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ù…ÙØªÙˆØ­Ø© (Ø§Ù„Ù†Ù‚Ø§Ø·)</th>
                        <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                    </tr>
                </thead>
                <tbody>
            `;

            sortedPlayers.forEach((player, index) => {
                const openedBoxesList = player.openedBoxes.map(box => {
                    const color = box.golden ? '#FFD700' : (box.points > 0 ? '#4CAF50' : '#FF4500');
                    return `<span style="color: ${color};">${box.name} (${box.points > 0 ? '+' : ''}${box.points})</span>`;
                }).join(', ');

                tableHTML += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${player.name}</td>
                        <td class="player-score-list">${openedBoxesList || 'Ù„Ù… ÙŠÙØªØ­ ØµÙ†Ø§Ø¯ÙŠÙ‚'}</td>
                        <td class="player-score-total">${player.score}</td>
                    </tr>
                `;
            });

            tableHTML += `</tbody>`;
            scoresTable.innerHTML = tableHTML;
            scoresTableArea.style.display = 'block';
            document.getElementById('showScoresBtn').style.display = 'none';
            document.getElementById('message').textContent = `Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…ØªÙˆÙØ±Ø©!`;
        }

        function toggleSettings(forceHide = false) {
            const settingsArea = document.getElementById('settingsArea');
            const toggleBtn = document.getElementById('toggleBtn');
            if (forceHide || settingsArea.style.display === 'block') {
                settingsArea.style.display = 'none';
                toggleBtn.innerHTML = '<i class="fas fa-cog"></i> Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª';
            } else {
                settingsArea.style.display = 'block';
                toggleBtn.innerHTML = '<i class="fas fa-eye-slash"></i> Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª';
            }
            updateButtonVisibility();
        }

        // Ø¯Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø©
        function handleLuckyHitEnd() {
            // ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ù†Ø§ Ø¯Ø§Ø®Ù„ Ø­Ø§Ù„Ø© Lucky Hit
            if (!isLuckyHitActiveGlobally) {
                return;
            }

            // Ù…Ø³Ø­ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø¥Ø°Ø§ ØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø­Ø¯Ø« 'ended'
            if (luckyHitAudioTimeout) {
                clearTimeout(luckyHitAudioTimeout);
                luckyHitAudioTimeout = null;
            }
            // Ù…Ø³Ø­ Ù…Ø¤Ù‚Øª Ø§Ù„Ù†Ø¨Ø¶ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ù‹Ø§
            if (luckyHitPulseTimeout) {
                clearTimeout(luckyHitPulseTimeout);
                luckyHitPulseTimeout = null;
            }

            // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†Ù‡ Ù„Ø¶Ù…Ø§Ù† Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø­Ø§Ù„Ø©
            luckyHitAudio.pause();
            luckyHitAudio.currentTime = 0;

            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ…Ø¹ Ù„Ø­Ø¯Ø« 'ended' Ù„Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø§Ù„ØªÙ†ÙÙŠØ°
            luckyHitAudio.removeEventListener('ended', handleLuckyHitEnd);

            isLuckyHitActiveGlobally = false;
            document.getElementById('luckyHitBtn').disabled = false; // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±

            // **Ø£Ø®ÙÙŠ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙˆØª ÙØ¹Ù„ÙŠÙ‹Ø§**
            hideLuckyHitTopIcons(); // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ©

            const availableBoxes = boxData.filter(box => !box.opened);
            if (availableBoxes.length > 0) {
                // Ø§Ø®ØªÙŠØ§Ø± ØµÙ†Ø¯ÙˆÙ‚ ÙˆØ§Ø­Ø¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„ÙØªØ­Ù‡
                luckyHitBoxToOpen = shuffleArray([...availableBoxes])[0];
                const chosenBoxElement = document.querySelector(`.box[data-box-id="${luckyHitBoxToOpen.id}"]`);
                if (chosenBoxElement) {
                    openBox(chosenBoxElement, luckyHitBoxToOpen.id);
                    // Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø³ØªØµØ¯Ø± Ù…Ù† Ø¯Ø§Ù„Ø© openBox
                } else {
                    document.getElementById('message').textContent = `Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø© Ø§Ù†ØªÙ‡ØªØŒ Ù„ÙƒÙ† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ø®ØªØ§Ø± Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„ÙŠÙ‡.`;
                }
            } else {
                document.getElementById('message').textContent = `Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø©. Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ù…ØªØ¨Ù‚ÙŠØ©!`;
            }

            // Ø§Ù„Ø¢Ù† ÙŠØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ø¯ÙˆØ± Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
            // (Ø³ÙˆØ§Ø¡ ØªÙ… ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚ Ø£Ùˆ Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙ†Ø§Ø¯ÙŠÙ‚)
            if (openedBoxes.length < boxData.length) { // Ù„Ø§ Ù†ØºÙŠØ± Ø§Ù„Ø¯ÙˆØ± Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ù‚Ø¯ Ø§Ù†ØªÙ‡Øª Ø¨Ø§Ù„ÙØ¹Ù„
                currentPlayer = (currentPlayer + 1) % playerScores.length;
                setTimeout(() => {
                    document.getElementById('message').textContent += ` Ø¯ÙˆØ± ${playerScores[currentPlayer].name}. Ø§ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚Ù‹Ø§!`;
                }, 1500);
            } else {
                document.getElementById('message').textContent = `Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!`;
                showScores(); // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ù‚Ø¯ Ø§Ù†ØªÙ‡Øª
            }
            updateButtonVisibility();
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¹Ø±Ø¶ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Lucky Hit Ø§Ù„Ø«Ø§Ø¨ØªØ© ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
        function showLuckyHitTopIcons() {
            const container = document.getElementById('luckyHitTopIconsContainer');
            container.innerHTML = ''; // Ù…Ø³Ø­ Ø£ÙŠ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø³Ø§Ø¨Ù‚Ø© Ù„Ø¶Ù…Ø§Ù† Ø­Ø§Ù„Ø© Ù†Ø¸ÙŠÙØ©
            container.style.opacity = '1'; // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø­Ø§ÙˆÙŠØ©

            // Ù…ØµÙÙˆÙØ© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            const glowColors = [
                'glow-blue',
                'glow-purple',
                'glow-green',
                'glow-orange',
                'glow-pink',
                'glow-red',
                'glow-gold'
            ];

            const numIconsToGenerate = 7;
            for (let i = 0; i < numIconsToGenerate; i++) {
                const iconElement = document.createElement('div');
                iconElement.classList.add('lucky-hit-top-icon');
                iconElement.innerHTML = `<img src="your_3d_icon.gif" alt="Lucky Hit Icon">`;

                // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù„ÙˆÙ†ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„ÙƒÙ„ Ø£ÙŠÙ‚ÙˆÙ†Ø©
                const colorClass = glowColors[i % glowColors.length]; // Ù„Ø¶Ù…Ø§Ù† ØªÙƒØ±Ø§Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ø£Ù„ÙˆØ§Ù†
                iconElement.classList.add(colorClass);

                iconElement.classList.add('pulsing'); // Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø¨Ø¶
                container.appendChild(iconElement);
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø®ÙØ§Ø¡ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Lucky Hit Ø§Ù„Ø«Ø§Ø¨ØªØ©
        function hideLuckyHitTopIcons() {
            const container = document.getElementById('luckyHitTopIconsContainer');
            container.style.opacity = '0'; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù…Ù† DOM Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
            // Ù†Ø³ØªØ®Ø¯Ù… setTimeout Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† transitionend Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¥Ø²Ø§Ù„Ø© Ø­ØªÙ‰ Ù„Ùˆ Ù„Ù… ÙŠØ­Ø¯Ø« Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
            setTimeout(() => {
                container.innerHTML = ''; // Ù…Ø³Ø­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
            }, 500); // ÙŠØ¬Ø¨ Ø£Ù† ØªØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù…Ø¯Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ ÙÙŠ CSS
        }


        // Ø¯Ø§Ù„Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        function activateLuckyHit() {
            if (!gameActive || openedBoxes.length === boxData.length || isLuckyHitActiveGlobally) {
                return;
            }

            document.getElementById('luckyHitBtn').disabled = true; // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø±
            isLuckyHitActiveGlobally = true; // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø©
            document.getElementById('message').textContent = `Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø©! Ø§Ù†ØªØ¸Ø± Ù„ØªØ±Ù‰ Ø­Ø¸Ùƒ...`;

            luckyHitAudio.play().catch(e => console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø©:", e));

            showLuckyHitTopIcons(); // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰

            // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ù…Ø³ØªÙ…Ø¹ Ø³Ø§Ø¨Ù‚ Ù„Ø­Ø¯Ø« 'ended' Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ØªÙƒØ±Ø±
            luckyHitAudio.removeEventListener('ended', handleLuckyHitEnd);

            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ø¬Ø¯ÙŠØ¯ Ù„Ø­Ø¯Ø« 'ended' Ù„Ù„ØµÙˆØª. Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø£Ø³Ø§Ø³ Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª.
            luckyHitAudio.addEventListener('ended', handleLuckyHitEnd);

            // Ù…Ø¤Ù‚Øª Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù†Ø¨Ø¶ Ø¨Ø¹Ø¯ Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø© (60 Ø«Ø§Ù†ÙŠØ©)
            luckyHitPulseTimeout = setTimeout(() => {
                const icons = document.querySelectorAll('.lucky-hit-top-icon');
                icons.forEach(icon => {
                    icon.classList.remove('pulsing'); // Ø¥Ø²Ø§Ù„Ø© ÙØ¦Ø© Ø§Ù„Ù†Ø¨Ø¶
                });
                console.log("ØªÙˆÙ‚Ù Ù†Ø¨Ø¶ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Lucky Hit.");
            }, 60000); // 60 Ø«Ø§Ù†ÙŠØ© = Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©

            // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ù‚Øª Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø£Ø·ÙˆÙ„ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù…Ù† Ù…Ø¯Ø© Ø§Ù„ØµÙˆØª Ø§Ù„ÙØ¹Ù„ÙŠØ© (Ù…Ø«Ù„Ø§Ù‹ 65 Ø«Ø§Ù†ÙŠØ© Ù„Ù„ØµÙˆØª Ø§Ù„Ø°ÙŠ Ù…Ø¯ØªÙ‡ 60 Ø«Ø§Ù†ÙŠØ©)
            // Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¤Ù‚Øª Ø³ÙŠØªÙ… Ù…Ø³Ø­Ù‡ Ø¥Ø°Ø§ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØµÙˆØª Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ§Ø³ØªØ¯Ø¹Ù‰ `handleLuckyHitEnd`.
            luckyHitAudioTimeout = setTimeout(() => {
                console.warn("Lucky Hit audio timed out. Forcing end of Lucky Hit.");
                handleLuckyHitEnd(); // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ù‡Ø§Ø¡ Lucky Hit
            }, 65000); // 65 Ø«Ø§Ù†ÙŠØ© ÙƒØ§Ø­ØªÙŠØ§Ø·ÙŠ
        }


        // Ø¯Ø§Ù„Ø© Ù„Ø¥ÙŠÙ‚Ø§Ù ÙƒÙ„ ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø©
        function stopAllLuckyHitEffects() {
            if (luckyHitAudioTimeout) {
                clearTimeout(luckyHitAudioTimeout);
                luckyHitAudioTimeout = null;
            }
            if (luckyHitPulseTimeout) { // Ù…Ø³Ø­ Ù…Ø¤Ù‚Øª Ø§Ù„Ù†Ø¨Ø¶ Ø¹Ù†Ø¯ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒÙ„ÙŠ
                clearTimeout(luckyHitPulseTimeout);
                luckyHitPulseTimeout = null;
            }
            luckyHitAudio.pause();
            luckyHitAudio.currentTime = 0;
            luckyHitAudio.removeEventListener('ended', handleLuckyHitEnd); // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ…Ø¹ Ù‡Ù†Ø§ Ø£ÙŠØ¶Ù‹Ø§

            hideLuckyHitTopIcons(); // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ©

            isLuckyHitActiveGlobally = false;
            luckyHitBoxToOpen = null; // Ù…Ø³Ø­ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù
            document.getElementById('luckyHitBtn').disabled = false;
            console.log("ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ ØªØ£Ø«ÙŠØ±Ø§Øª Lucky Hit.");
        }


        function updateButtonVisibility() {
            const gameEnded = !gameActive && openedBoxes.length === boxData.length && boxData.length > 0;
            const settingsVisible = document.getElementById('settingsArea').style.display === 'block';

            document.getElementById('startGameBtn').style.display = settingsVisible ? 'none' : 'inline-block';
            document.getElementById('restartGameBtn').style.display = gameActive || gameEnded ? 'inline-block' : 'none';
            // Ø²Ø± Ø§Ù„Ø¶Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø© ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ù†Ø´Ø·Ø© ÙˆÙ„Ù… ØªÙ†ØªÙ‡ÙØŒ ÙˆÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ù…ØªØ¨Ù‚ÙŠØ©
            // ÙˆÙ„Ø§ ÙŠØ¸Ù‡Ø± Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø±Ø¦ÙŠØ©ØŒ ÙˆØºÙŠØ± Ù…Ø¹Ø·Ù„ (Ø¹Ù†Ø¯ ØªÙØ¹ÙŠÙ„ Lucky Hit)
            document.getElementById('luckyHitBtn').style.display = (gameActive && !gameEnded && openedBoxes.length < boxData.length && !settingsVisible) ? 'inline-block' : 'none';


            document.getElementById('volumeUpBtn').style.display = 'inline-block';
            document.getElementById('volumeDownBtn').style.display = 'inline-block';
            document.getElementById('muteToggleBtn').style.display = 'inline-block'; // ØªØ£ÙƒØ¯ Ù…Ù† Ø¸Ù‡ÙˆØ± Ø²Ø± Ø§Ù„ÙƒØªÙ…
            document.getElementById('showScoresBtn').style.display = gameEnded ? 'inline-block' : 'none';
        }

        function increaseVolume() {
            if (backgroundMusic.volume < 1) {
                backgroundMusic.volume = Math.min(1, backgroundMusic.volume + 0.1);
            }
        }

        function decreaseVolume() {
            if (backgroundMusic.volume > 0) {
                backgroundMusic.volume = Math.max(0, backgroundMusic.volume - 0.1);
            }
        }

        // New mute/unmute button functionality
        function toggleMute() {
            const muteButton = document.getElementById('muteToggleBtn');
            if (backgroundMusic.muted) {
                backgroundMusic.muted = false;
                muteButton.innerHTML = '<i class="fas fa-volume-mute"></i> ÙƒØªÙ… Ø§Ù„ØµÙˆØª';
                backgroundMusic.play().catch(e => console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ©:", e));
            } else {
                backgroundMusic.muted = true;
                muteButton.innerHTML = '<i class="fas fa-volume-up"></i> Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒØªÙ…';
            }
        }


        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();

            document.getElementById('numPlayers').addEventListener('change', () => {
                saveSettings();
            });
            document.getElementById('numBoxes').addEventListener('change', () => {
                saveSettings();
            });

            let saveTimeout;
            document.getElementById('playerInputsTableBody').addEventListener('input', (event) => {
                if (event.target.tagName === 'INPUT' && event.target.type === 'text') {
                    clearTimeout(saveTimeout);
                    saveTimeout = setTimeout(saveSettings, 500);
                }
            });

            document.getElementById('toggleBtn').addEventListener('click', toggleSettings);
            document.getElementById('startGameBtn').addEventListener('click', startGame);
            document.getElementById('restartGameBtn').addEventListener('click', restartGameWithoutSettings);
            document.getElementById('showScoresBtn').addEventListener('click', showScores);
            document.getElementById('luckyHitBtn').addEventListener('click', activateLuckyHit);
            document.getElementById('volumeUpBtn').addEventListener('click', increaseVolume);
            document.getElementById('volumeDownBtn').addEventListener('click', decreaseVolume);
            document.getElementById('muteToggleBtn').addEventListener('click', toggleMute); // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ø§Ù„Ø­Ø¯Ø« Ù„Ø²Ø± Ø§Ù„ÙƒØªÙ…

            document.getElementById('settingsArea').style.display = 'block';
            document.getElementById('toggleBtn').innerHTML = '<i class="fas fa-eye-slash"></i> Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª';
            updateButtonVisibility();
            if (openedBoxes.length === 0 && playerScores.length === 0) {
                document.getElementById('message').textContent = 'Ù‚Ù… Ø¨Ø¶Ø¨Ø· Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø§ Ø§Ù„Ù„Ø¹Ø¨Ø©".';
            }
        });
    </script>
</body>
</html>